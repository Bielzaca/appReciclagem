<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Página do Usuário</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #4e73df;
            --secondary-color: #f8f9fc;
            --accent-color: #2e59d9;
            --text-dark: #5a5c69;
        }

        body {
            font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fc;
            color: var(--text-dark);
        }

        .user-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .welcome-header {
            color: var(--primary-color);
            margin-bottom: 2rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tabs .nav-link {
            color: var(--text-dark);
            font-weight: 600;
            border: none;
            padding: 0.75rem 1.5rem;
            margin-right: 0.5rem;
        }

        .nav-tabs .nav-link:hover {
            border: none;
            color: var(--primary-color);
        }

        .nav-tabs .nav-link.active {
            color: var(--primary-color);
            background-color: transparent;
            border-bottom: 3px solid var(--primary-color);
        }

        .tab-content {
            background-color: white;
            border-radius: 0.35rem;
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1);
            padding: 2rem;
            margin-top: -1px;
            border: 1px solid #e3e6f0;
            border-top: none;
        }

        .list-group-item {
            border: none;
            border-bottom: 1px solid #e3e6f0;
            padding: 1.25rem 1.5rem;
            display: flex;
            justify-content: space-between;
        }

        .list-group-item:last-child {
            border-bottom: none;
        }

        .list-group-item strong {
            color: var(--primary-color);
            width: 150px;
        }

        .table {
            margin-bottom: 0;
        }

        .table th {
            background-color: var(--secondary-color);
            border-top: none;
            font-weight: 700;
            color: var(--text-dark);
            padding: 1rem 1.5rem;
        }

        .table td {
            padding: 1rem 1.5rem;
            vertical-align: middle;
        }

        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(78, 115, 223, 0.05);
        }

        .credits-badge {
            background-color: var(--primary-color);
            color: white;
            padding: 0.35rem 0.75rem;
            border-radius: 0.35rem;
            font-weight: 700;
        }
    </style>
</head>
<body>
<div class="user-container">
    <h2 class="welcome-header">
        <i class="bi bi-person-circle me-2"></i>
        Bem-vindo, <span th:text="${usuario.nome}"></span>!
        <span class="credits-badge float-end">
            <i class="bi bi-coin me-1"></i>
            <span th:text="${usuario.saldoCreditos}"></span> créditos
        </span>
    </h2>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" id="usuarioTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="dados-tab" data-bs-toggle="tab" data-bs-target="#dados" type="button" role="tab">
                <i class="bi bi-person-lines-fill me-2"></i>Dados Pessoais
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="trocas-tab" data-bs-toggle="tab" data-bs-target="#trocas" type="button" role="tab">
                <i class="bi bi-arrow-left-right me-2"></i>Trocas
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="entregas-tab" data-bs-toggle="tab" data-bs-target="#entregas" type="button" role="tab">
                <i class="bi bi-box-seam-fill me-2"></i>Entregas
            </button>
        </li>
    </ul>

    <!-- Tab content -->
    <div class="tab-content">
        <!-- Dados Pessoais -->
        <div class="tab-pane fade show active" id="dados" role="tabpanel">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong><i class="bi bi-person-fill me-2"></i>Nome:</strong>
                    <span th:text="${usuario.nome}"></span>
                </li>
                <li class="list-group-item">
                    <strong><i class="bi bi-credit-card me-2"></i>CPF:</strong>
                    <span th:text="${usuario.cpf}"></span>
                </li>
                <li class="list-group-item">
                    <strong><i class="bi bi-telephone-fill me-2"></i>Telefone:</strong>
                    <span th:text="${usuario.telefone}"></span>
                </li>
                <li class="list-group-item">
                    <strong><i class="bi bi-house-door-fill me-2"></i>Endereço:</strong>
                    <span th:text="${usuario.endereco}"></span>
                </li>
            </ul>
        </div>

        <!-- Trocas -->
        <div class="tab-pane fade" id="trocas" role="tabpanel">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>ID Cesta</th>
                        <th>Quantidade</th>
                        <th>Valor Gerado</th>
                        <th>Data</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="troca : ${trocas}">
                        <td th:text="${troca.id}"></td>
                        <td th:text="${troca.idCesta}"></td>
                        <td th:text="${troca.qtdTroca}"></td>
                        <td th:text="${troca.valorGeradoTroca}"></td>
                        <td th:text="${troca.dataTroca}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${trocas.empty}" class="text-center py-4">
                <i class="bi bi-exclamation-circle-fill text-muted" style="font-size: 2rem;"></i>
                <p class="mt-3">Nenhuma troca registrada</p>
            </div>
        </div>

        <!-- Entregas -->
        <div class="tab-pane fade" id="entregas" role="tabpanel">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Material</th>
                        <th>Quantidade (KG)</th>
                        <th>Data</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="entrega : ${entregas}">
                        <td th:text="${entrega.id}"></td>
                        <td th:text="${entrega.material.tipoMaterial}"></td>
                        <td th:text="${entrega.qtdEntregaKG}"></td>
                        <td th:text="${entrega.dataEntrega}"></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div th:if="${entregas.empty}" class="text-center py-4">
                <i class="bi bi-exclamation-circle-fill text-muted" style="font-size: 2rem;"></i>
                <p class="mt-3">Nenhuma entrega registrada</p>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS Bundle (inclui Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>